<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Playcorder tests</title>
    <link rel="stylesheet" type="text/css" href="./libs/mocha.css"/>
    <link rel="stylesheet" type="text/css" href="test.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script>
        $(document).ready(
          function(){
               $('a.edit').on('click',function(evt){
                   evt.preventDefault();
                   var u1 = '';
                   var u2 = '';
                   if($('#plink').val()){
                       u1 = new URL($('#plink').val());
                       u1 = u1.search.substr(1);
                   }
                   if(!u1){
                       var akey = $('#atoken').val();
                       var rkey = $('#rtoken').val();
                       if(akey && rkey){
                           u1 = "appkey="+akey+"&rkey="+rkey+"&testing=true";
                       }
                   }
                   if($('#rid').val()){
                       u2 = $('#rid').val();
                       u2 = u2.split(',');
                   }
                    var href = $(this).attr("rel");
                    switch (href){
                        case "1":
                            href = 'video.html';
                            break;
                        case "2":
                            href = 'results.html';
                            break;
                        case "3":
                            href = 'video.html?full=true';
                            break;
                    }
                   if(u2.length<=0){
                       var u = href+'?'+u1;
                       window.open(u);
                   }else{
                       for(var i = 0; i < u2.length; i++){
                           var u = href+'?'+u1+'&respondentid='+u2[i];
                           window.open(u);
                           //$(this).attr("href",u);
                       }
                   }
               });

          }
        );
    </script>
</head>
<body>

<!-- Playcorder START -->

<div id="testmenu">
    <h2>Automatic Tests</h2>

    <fieldset>
        <legend>Options</legend>
        <h4>Video</h4>
        <p><em>Insert a project link OR app token and research token</em></p>
        <div>
            <label for="plink">Project link</label>
            <input id="plink" name="plink" type="text" placeholder="insert a project link link and select a test" />
        </div>
        <div>
            <label for="atoken">App token</label>
            <input id="atoken" name="atoken" type="text" placeholder="insert a app token" />
        </div>
        <div>
            <label for="rtoken">Research atoken</label>
            <input id="rtoken" name="rtoken" type="text" placeholder="insert a research token" />
        </div>
        <hr/>
        <h4>Result</h4>
        <div>
        <label for="rid">Respondent id (optional, just for result test, could be separated by comma)</label>
        <input id="rid" name="rid" type="text" placeholder="insert a respondent id" />
        </div>
    </fieldset>
    <fieldset>
    <legend>Select a test</legend>
    <ol>
        <li><a href="video.html" rel="1" class="edit" target="_blank" >Video test </a></li>
        <li><a href="results.html" rel="2" class="edit"  target="_blank" >Results test</a></li>
        <li><a href="video.html?full=true" rel="3" class="edit"  target="_blank" >Full test (video test +  result test)</a></li>
        <!-- 204,206,207,208,623,624,625,626,627,628 original order -->
    </ol>
    </fieldset>
</div>






</html>
